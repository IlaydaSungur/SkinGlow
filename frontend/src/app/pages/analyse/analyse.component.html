<div class="page-container">
  <h1>Analyse</h1>

  <!-- FotoÄŸraf yÃ¼kleme -->
  <input type="file" (change)="onFileSelected($event)" accept="image/*" />
  <button (click)="processImage()" [disabled]="isLoading">
    {{ isLoading ? 'Analysing...' : 'Analyse' }}
  </button>

  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- OCR sonucu -->
  <div *ngIf="extractedText">
    <h3>Extracted Text:</h3>
    <pre>{{ extractedText }}</pre>
  </div>

  <!-- Ingredients -->
  <div *ngIf="ingredients.length > 0">
    <h3>Ingredients:</h3>
    <ul>
      <li *ngFor="let item of ingredients">
        {{ item.name }}
      </li>
    </ul>
  </div>

  <!-- Analysis -->
  <div *ngIf="analysis.length > 0">
    <h3>Analysis:</h3>
    <div *ngFor="let item of analysis" class="card">
      <h4>{{ item.name }}</h4>
      <p>{{ item.description }}</p>
      <span class="effect"
        [ngClass]="{
          beneficial: item.effect === 'beneficial',
          harmful: item.effect === 'harmful',
          neutral: item.effect === 'neutral'
        }"
      >
        {{ item.effect }}
      </span>
    </div>
  </div>

  <!-- ðŸ”¹ Fallback: EÄŸer JSON parse edilemezse raw sonucu gÃ¶ster -->
  <div *ngIf="!ingredients.length && !analysis.length && raw">
    <h3>Raw Result:</h3>
    <pre>{{ raw }}</pre>
  </div>
</div>

